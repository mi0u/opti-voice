# Visual Calibration Flow

## What the User Sees

### 1️⃣ First Time Launch (No localStorage)

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│          Βαθμονόμηση Eye Tracking                      │
│                                                         │
│   Καλώς ήρθατε! Πρέπει να βαθμονομήσουμε το σύστημα.  │
│                                                         │
│   Όταν δείτε το βέλος ↑, κοιτάξτε ΠΑΝΩ                │
│   (έξω από την οθόνη) μέχρι να ακούσετε τον ήχο.      │
│                                                         │
│                                                         │
│      ┌─────────────────────────────────────┐          │
│      │  Έναρξη Βαθμονόμησης ΠΑΝΩ          │          │
│      └─────────────────────────────────────┘          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2️⃣ User Clicks Button

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│          Βαθμονόμηση Eye Tracking                      │
│                                                         │
│   Όταν δείτε το βέλος ↑, κοιτάξτε ΠΑΝΩ                │
│   (έξω από την οθόνη) μέχρι να ακούσετε τον ήχο.      │
│                                                         │
│                                                         │
│            Προετοιμασία...                             │
│                                                         │
│      ┌─────────────────────────────────────┐          │
│      │  Έναρξη Βαθμονόμησης ΠΑΝΩ   [···] │          │
│      └─────────────────────────────────────┘          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 3️⃣ Arrow Appears (Collecting Data)

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│          Βαθμονόμηση Eye Tracking                      │
│                                                         │
│   Όταν δείτε το βέλος ↑, κοιτάξτε ΠΑΝΩ                │
│   (έξω από την οθόνη) μέχρι να ακούσετε τον ήχο.      │
│                                                         │
│                                                         │
│                      ↑                                  │
│                  (pulsing)                              │
│                                                         │
│              Κοιτάξτε ΠΑΝΩ!                            │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 4️⃣ Calibration Complete for UP

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│          Βαθμονόμηση Eye Tracking                      │
│                                                         │
│   Όταν δείτε το βέλος ↑, κοιτάξτε ΠΑΝΩ                │
│   (έξω από την οθόνη) μέχρι να ακούσετε τον ήχο.      │
│                                                         │
│                      ↑                                  │
│                                                         │
│        ✓ Ολοκληρώθηκε! (Κατώφλι: 0.45)                │
│                                                         │
│         🔊 BEEP!                                        │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 5️⃣ Next Direction - DOWN

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│          Βαθμονόμηση Eye Tracking                      │
│                                                         │
│   Όταν δείτε το βέλος ↓, κοιτάξτε ΚΑΤΩ                │
│   μέχρι να ακούσετε τον ήχο.                           │
│                                                         │
│                                                         │
│                                                         │
│      ┌─────────────────────────────────────┐          │
│      │  Έναρξη Βαθμονόμησης ΚΑΤΩ          │          │
│      └─────────────────────────────────────┘          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 6️⃣ After All 4 Directions

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│          Βαθμονόμηση Eye Tracking                      │
│                                                         │
│                                                         │
│                                                         │
│                                                         │
│                                                         │
│         ✓ Βαθμονόμηση Ολοκληρώθηκε!                   │
│                                                         │
│              (Starting app in 2s...)                    │
│                                                         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 7️⃣ App Starts Normally

```
┌─────────────────────────────────────────────────────────┐
│  👁️ Eye Tracking Active              ⚙️ Settings       │
│                                                         │
│  Look Left: Select Left & Continue                     │
│  Look Right: Select Right & Continue                   │
│  Look Up: Special Menu                                 │
│                                                         │
│  ┌──────────────┐  ┌──────────────┐                   │
│  │   Left Col   │  │   Right Col  │                   │
│  │      A       │  │      N       │                   │
│  │      B       │  │      O       │                   │
│  └──────────────┘  └──────────────┘                   │
│                                                         │
│  ┌──────────────────────────────────────────────┐     │
│  │ Your text will appear here...                │     │
│  └──────────────────────────────────────────────┘     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## Settings Panel - Re-calibrate Option

```
┌─────────────────────────────────┐
│  ⚙️ Eye Tracking Settings       │
│                                 │
│  Up Threshold: 0.45             │
│  ▬▬▬▬▬▬○───────                │
│                                 │
│  Down Threshold: 0.52           │
│  ▬▬▬▬▬▬▬○──────                │
│                                 │
│  Left Threshold: 0.48           │
│  ▬▬▬▬▬▬○───────                │
│                                 │
│  Right Threshold: 0.50          │
│  ▬▬▬▬▬▬─○──────                │
│                                 │
│  Hold Duration: 500ms           │
│  Stability Frames: 5            │
│  Smoothing Factor: 0.80         │
│                                 │
│  ☑ Show Eye Visualization       │
│  ☑ Sound on Detection           │
│                                 │
│  ┌─────────────────────────┐   │
│  │  Reset to Defaults      │   │
│  └─────────────────────────┘   │
│  ┌─────────────────────────┐   │
│  │  Re-calibrate Thresholds│   │  ← NEW!
│  └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

## Complete Calibration Sequence

```
START
  ↓
Check localStorage
  ↓
  ├─ Has settings? → Load & Start App
  │
  └─ No settings? → Show Calibration
                         ↓
                    UP Direction
                    - Button appears
                    - User clicks
                    - Wait 2s
                    - Show arrow ↑
                    - Collect 1.5s of data
                    - Calculate threshold
                    - Beep
                    - Show result
                         ↓
                    DOWN Direction (↓)
                         ↓
                    LEFT Direction (←)
                         ↓
                    RIGHT Direction (→)
                         ↓
                    Save to localStorage
                         ↓
                    Update UI
                         ↓
                    Hide calibration
                         ↓
                    Start App
```

## Data Collection Example

```javascript
// During calibration, the system collects:

UP Direction (1.5 seconds = ~45 frames):
[
  [0.52, 0.54],  // frame 1: [eyeLookUpLeft, eyeLookUpRight]
  [0.51, 0.53],  // frame 2
  [0.53, 0.55],  // frame 3
  // ... 42 more frames
]

Calculation:
- All values: [0.52, 0.54, 0.51, 0.53, 0.53, 0.55, ...]
- Mean: 0.53
- Threshold: 0.53 × 0.8 = 0.424 ≈ 0.42

Result: UP_THRESHOLD = 0.42
```
